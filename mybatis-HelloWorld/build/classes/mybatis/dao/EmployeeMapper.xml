<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="mybatis.dao.EmployeeMapper">
 	
 	<!-- public Employee getEmpById(Integer id); -->
 	<select id="getEmpById" resultType="mybatis.bean.Employee">
 		select * from employee where id=#{id}
 	</select>
 	
 	<!-- public Long addEmp(Employee employee); -->
 	<insert id="addEmp" parameterType="mybatis.bean.Employee"
 		useGeneratedKeys="true" keyProperty="id">
 		insert into employee(lastName,email,gender)
 		values(#{lastName},#{email},#{gender})
 	</insert>
 	
 	<!-- public void delete(Integer id); -->
 	<delete id="delete">
 		delete from employee where id=#{id}
 	</delete>
 	
 	<!-- 	public boolean updateEmp(Employee employee); -->
 	<update id="updateEmp">
 		update employee set lastName=#{lastName},email=#{email},gender=#{gender}
 		where id=#{id}
 	</update>
 	
 	<!-- 	public Employee getEmpByIdAndLastName(@Param("id")Integer id,@Param("lastName")String lastName); -->
 	<select id="getEmpByIdAndLastName" resultType="mybatis.bean.Employee">
 		select * from employee where id=${id} and lastName=#{lastName}
 	</select>
 	
	<!-- 	public List<Employee> getEmpByLastNameLike(String lastName); -->
	<select id="getEmpByLastNameLike" resultType="mybatis.bean.Employee">
		select * from employee where lastName like #{lastName}
	</select>
	
	<!-- 	public Map<String, Employee> getEmpByLastNameLikeReturnMap(String map); -->
	<select id="getEmpByLastNameLikeReturnMap" resultType="mybatis.bean.Employee">
		select * from employee where lastName like #{lastName}
	</select>
	
	<!-- 	public Employee getEmpAndDept(Integer id); -->
	<!-- <resultMap type="mybatis.bean.Employee" id="empAndDept">
		<id column="id" property="id"/>
		<result column="lastName" property="lastName"/>
		<result column="eamil" property="email"/>
		<result column="gender" property="gender"/>
		<result column="did" property="dept.id"/>
		<result column="departName" property="dept.departmentName"/>
	</resultMap> -->
	<!-- 可以使用上边这个也可以使用下边这个 -->
	<resultMap type="mybatis.bean.Employee" id="empAndDept2">
		<id column="id" property="id"/>
	<!--<result column="lastName" property="lastNmame"/> 有此句会出错 -->	
		<result column="email" property="email"/>
		<result column="gender" property="gender"/>
		
		<association property="dept" javaType="mybatis.bean.Department">
			<id column="id" property="id"/>
			<result column="departmentName" property="departmentName"/>
		</association>
		
	</resultMap>
	
	<select id="getEmpAndDept" resultMap="empAndDept2">
		select e.id id,e.lastName lastName,e.email email,e.gender gender,
				d.id did,d.departmentName depatmentName from employee e,department d
				where e.id = d.id and e.id = #{id}
	</select>
	
 </mapper>